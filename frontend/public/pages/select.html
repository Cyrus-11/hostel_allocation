<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Selection - Hostel Allocation System</title>
    <link rel="stylesheet" href="../css/select.css">
    
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="dashboard.html" class="navbar-brand">Hostel Allocation System</a>
            <div class="nav-links">
                <a href="#">Welcome</a>
                <a href="Log.html" class="btn" style="background: #e74c3c; padding: 5px 15px;">Logout</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <h2 style="margin: 20px 0;">Room Selection</h2>
        
        <div class="selection-container">
            <!-- Filters Section -->
            <div class="filters-section">
                <h3>Filters</h3>
                
                <div style="margin: 20px 0;">
                    <label>Select Hostel:</label>
                    <select class="form-group" style="width: 100%; margin-top: 5px;" onchange="updateRooms()">
                        <option value="A">Hostel A (Male)</option>
                        <option value="B">Hostel B (Female)</option>
                    </select>
                </div>

                <div style="margin: 20px 0;">
                    <label>Floor:</label>
                    <div class="floor-selector">
                        <button class="floor-btn active" onclick="filterByFloor(1)">1st</button>
                        <button class="floor-btn" onclick="filterByFloor(2)">2nd</button>
                        <button class="floor-btn" onclick="filterByFloor(3)">3rd</button>
                    </div>
                </div>

                <div class="legend">
                    <div class="legend-item">
                        <span class="capacity-dot available"></span>
                        <span>Available</span>
                    </div>
                    <div class="legend-item">
                        <span class="capacity-dot occupied"></span>
                        <span>Occupied</span>
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <p>Total Available Rooms: <strong id="availableCount">45</strong></p>
                    <p>Total Occupied Rooms: <strong id="occupiedCount">155</strong></p>
                </div>
            </div>

            <!-- Rooms Grid -->
            <div class="rooms-grid" id="roomsGrid">
                <!-- Rooms will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Room Confirmation Modal -->
    <div class="confirmation-modal" id="confirmationModal">
        <div class="modal-content">
            <h3>Confirm Room Selection</h3>
            <div id="roomDetails" style="margin: 20px 0;"></div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <button class="btn btn-primary" onclick="confirmRoomSelection()">Confirm</button>
                <button class="btn" onclick="closeModal()" style="background: #e74c3c; color: white;">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        function generateRooms() {
            const grid = document.getElementById('roomsGrid');
            grid.innerHTML = '';
            
            for (let i = 1; i <= 50; i++) {
                const isAvailable = Math.random() > 0.7;
                const occupants = isAvailable ? Math.floor(Math.random() * 3) : 4;
                
                const roomCard = document.createElement('div');
                roomCard.className = `room-card ${occupants === 4 ? 'full' : ''}`;
                
                roomCard.innerHTML = `
                    <div class="room-number">Room ${i}</div>
                    <div class="capacity-indicator">
                        ${Array(4).fill(0).map((_, index) => 
                            `<span class="capacity-dot ${index < occupants ? 'occupied' : 'available'}"></span>`
                        ).join('')}
                    </div>
                    <div class="room-details">
                        <div>Capacity: 4 students</div>
                        <div>Occupied: ${occupants} students</div>
                    </div>
                    ${occupants > 0 ? `
                        <div class="occupant-list">
                            ${Array(occupants).fill(0).map((_, index) => 
                                `<div class="occupant">Student ${index + 1}</div>`
                            ).join('')}
                        </div>
                    ` : ''}
                `;

                if (occupants < 4) {
                    roomCard.onclick = () => showConfirmation(i, occupants);
                }
                
                grid.appendChild(roomCard);
            }
            
            updateCounts();
        }

        function showConfirmation(roomNumber, occupants) {
            const modal = document.getElementById('confirmationModal');
            const details = document.getElementById('roomDetails');
            
            details.innerHTML = `
                <p>You are about to select:</p>
                <p><strong>Room ${roomNumber}</strong></p>
                <p>Current Occupants: ${occupants}/4</p>
                <p>Floor: ${Math.ceil(roomNumber/20)}</p>
            `;
            
            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('confirmationModal').style.display = 'none';
        }

        function confirmRoomSelection() {
            alert('Room allocated successfully!');
            window.location.href = 'dashboard.html';
        }

        function filterByFloor(floor) {
            const buttons = document.querySelectorAll('.floor-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            buttons[floor-1].classList.add('active');
            
            generateRooms(); // In real application, filter rooms by floor
        }

        function updateCounts() {
            const rooms = document.querySelectorAll('.room-card');
            const occupied = document.querySelectorAll('.room-card.full').length;
            
            document.getElementById('availableCount').textContent = rooms.length - occupied;
            document.getElementById('occupiedCount').textContent = occupied;
        }

        // Initialize rooms
        generateRooms();
    </script>
</body>
</html>